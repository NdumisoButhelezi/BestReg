@{
    ViewData["Title"] = "Child Tracker";
}

<h2>@ViewData["Title"]</h2>

<div id="map" style="height: 500px; width: 100%;"></div>

<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAfkQKIbLgZuMNWWBTFjQJL9kbLhNjgYU0&callback=initMap" async defer></script>

<script>
    let map;
    let directionsService;
    let directionsRenderer;

    function initMap() {
        // Initialize the map centered at a default location (e.g., the child's home)
        const homeLocation = { lat: 40.7128, lng: -74.0060 }; // Example: New York City coordinates

        map = new google.maps.Map(document.getElementById("map"), {
            center: homeLocation,
            zoom: 14,
        });

        directionsService = new google.maps.DirectionsService();
        directionsRenderer = new google.maps.DirectionsRenderer();
        directionsRenderer.setMap(map);

        // Example: Track from home to school
        calculateAndDisplayRoute(directionsService, directionsRenderer, homeLocation, { lat: 40.730610, lng: -73.935242 }); // Example: School location
    }

    function calculateAndDisplayRoute(directionsService, directionsRenderer, start, end) {
        directionsService.route(
            {
                origin: start,
                destination: end,
                travelMode: google.maps.TravelMode.DRIVING,
            },
            (response, status) => {
                if (status === "OK") {
                    directionsRenderer.setDirections(response);
                } else {
                    window.alert("Directions request failed due to " + status);
                }
            }
        );
    }
</script>
